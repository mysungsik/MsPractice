<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('includes/head', { title: 'Post title' }) %>
    <link rel="stylesheet" href="/styles/base.css" />
    <link rel="stylesheet" href="/styles/forms.css" />
    <link rel="stylesheet" href="/styles/posts.css" />
    <script src="/scripts/comments.js" defer></script> 
  </head>

  <body>
    <%- include('includes/header') %>
    <main id="post-detail">
      <h1><%= post.title %></h1>
      <section id="post-meta">
        <address>
          <a href="mailto:<%= post.author.email %>"><%= post.author.name %></a>
        </address>
        | <time datetime="<%= post.date %>"><%= post.humanReadableDate %></time>
      </section>
      <hr />
      <section>
        <p id="body"><%= post.body %></p>
      </section>

      
      <section id="comments">
      <p id = "commentsP">
        This post might have comments. You can load them if you want to view
        them.
      </p>
      <button id="load-comments" class="btn btn-alt" name="load-comments" data-postid="<%= post._id %>"> Load Comments</button>
      </section>
      <!-- 전이였으면, /:id/comments 페이지로 넘어가고, render해서, comment를 받아서, 그걸로 페이지를 꾸미고 새로운 페이지를 로드했다.-->
      <!-- 이젠 URL로 페이지가 넘어갈것도 아니고, render 할 것도 아니므로, <ejs 탬플릿> 구문은 필요없다 -->

      
      <section id="comments-form">
        <h2>Leave a comment</h2>
        <form id="comments-data-form" data-postid=<%=post._id%> >
          <div class="form-control">
            <label for="title">Comment title</label>
            <input type="text" id="title" name="title" required />
          </div>
          <div class="form-control">
            <label for="text">Your comment</label>
            <textarea name="text" id="text" rows="3" required></textarea>
          </div>
          <button class="btn">Save Comment</button>
        </form>
      </section>
    </main>
  </body>
</html>
